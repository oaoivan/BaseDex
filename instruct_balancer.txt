Типы пулов в Balancer

Balancer — это фреймворк для создания пулов, поэтому типов может быть много, но вот основные:

    Weighted Pools (Взвешенные пулы): Это классический и самый гибкий тип пула Balancer.

        Что это: Позволяют создавать пулы с 2-8 токенами в любой пропорции (например, 80% WETH / 20% USDC). Классический пул Uniswap V2 50/50 — это просто частный случай взвешенного пула.

        Аналог: Можно считать его продвинутой версией Uniswap V2.

    Stable Pools (Стабильные пулы):

        Что это: Предназначены для активов с привязанной стоимостью (стейблкоины, LST). Используют математику, схожую с Curve, для сверхнизкого проскальзывания.

        Аналог: Аналог пулов Curve или Velodrome Stable Pool.

    Liquidity Bootstrapping Pools (LBP):

        Что это: Специализированный тип взвешенного пула, где веса токенов могут динамически меняться со временем. Часто используется для первичной продажи токенов (IDO), создавая давление на цену вниз, чтобы предотвратить пампы и манипуляции ботов.

        Аналог: Уникальная концепция, прямых аналогов в Uniswap нет.

Как определить тип пула

Поскольку вся логика завязана на Хранилище, вам нужно использовать функции, которые связывают пул с ним. Самый надежный способ — это вызвать на контракте пула функцию getPoolId().
Алгоритм проверки:

    Возьмите адрес контракта пула.

    Вызовите на нем view функцию getPoolId(). Эта функция есть у всех V2-совместимых пулов Balancer.

    Проанализируйте результат. Функция вернет bytes32 значение (ID пула). Этот ID уникален и содержит в себе информацию о типе пула. Первые 20 байт этого ID — это сам адрес пула, а следующие байты кодируют его тип (Pool Specialization).

        0x...000000000000000000000001: Weighted Pool

        0x...000000000000000000000002: Stable Pool

        0x...000000000000000000000003: LiquidityBootstrapping Poolbala