Thena, работающая на BNB Chain, использует гибридную модель, сочетая два основных типа пулов от разных архитектур: Velodrome/Solidly и Uniswap V3.
1. Thena AMM (Velodrome-like)

Это основная модель Thena, которая является форком протокола Solidly (как Velodrome и Aerodrome).

    Технология: Имеет два подтипа пулов:

        Стабильные (Stable): Для активов с привязанной стоимостью (например, USDT/USDC), используют формулу Curve.

        Переменные (Volatile): Для всех остальных активов (например, WBNB/THE), используют стандартную формулу x*y=k.

    Аналог: Velodrome / Aerodrome.

2. Thena Fusion (Uniswap V3-like)

Это их решение для концентрированной ликвидности, которое является прямым форком Uniswap V3.

    Технология: Концентрированная ликвидность, позволяющая провайдерам размещать средства в узких ценовых диапазонах.

    Аналог: Uniswap V3 / PancakeSwap V3.

Как определить тип пула

Вам понадобится многоступенчатый алгоритм проверки, чтобы различить эти два совершенно разных типа контрактов.
Рекомендуемый алгоритм проверки:

    Попытайтесь вызвать stable() на адресе контракта пула.

        Успех: Это пул Thena AMM (Velodrome-like).

            Если функция вернула true — это стабильный пул.

            Если функция вернула false — это переменный пул.

        Неудача (функция не найдена): Переходите к следующему шагу, так как это не пул типа Velodrome.

    Попытайтесь вызвать slot0().

        Успех: Это пул Thena Fusion (Uniswap V3-like). Наличие этой функции — однозначный идентификатор.

        Неудача: Это неизвестный тип контракта.

Итог: Для Thena ваша логика должна сначала проверить, является ли пул частью их основной AMM (через функцию stable()), и если нет, то проверить, является ли он пулом Fusion (через функцию slot0()).